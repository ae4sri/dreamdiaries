(this.webpackJsonpdreamdiariesfrontend=this.webpackJsonpdreamdiariesfrontend||[]).push([[0],{119:function(e,t,r){},151:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(49),a=r.n(c),s=(r(119),r(3)),i=r(5),u=r.n(i),j=r(8),o=r(16),b=r(50),l=r(34),d=r.n(l),h={createUser:function(){var e=Object(j.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("http://localhost:3001/api/users",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=(Object(b.b)("createAndSetUser",function(){var e=Object(j.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.createUser(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),Object(b.c)({name:"user",initialState:{username:"",token:""},reducers:{setUser:function(e,t){return console.log("WTF"),t.payload},logout:function(e){e.username="",e.token=""}}})),x=O.actions,p=x.setUser,f=x.logout,v=O.reducer,m={login:function(){var e=Object(j.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("http://localhost:3001/api/login",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=r(160),y=r(56),D=r(162),w=r(163),k=r(171),S=r(47),C=r(2),P=function(){var e=Object(o.b)(),t=function(){var t=Object(j.a)(u.a.mark((function t(r){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),O()){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,m.login({username:a,password:d});case 6:return n=t.sent,t.next=9,e(p(n));case 9:i(""),h(""),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),alert("Login failed, error: "+t.t0);case 16:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}(),r=Object(n.useState)(""),c=Object(s.a)(r,2),a=c[0],i=c[1],b=Object(n.useState)(""),l=Object(s.a)(b,2),d=l[0],h=l[1],O=function(){return d.length>=5&&a.length>=3},x=O();return Object(C.jsx)(g.a,{children:Object(C.jsx)("form",{onSubmit:t,children:Object(C.jsxs)(y.a,{children:[Object(C.jsx)(D.a,{children:"Username"}),Object(C.jsx)(w.a,{type:"text",value:a,onChange:function(e){var t=e.target;return i(t.value)}}),Object(C.jsx)(D.a,{children:"Password"}),Object(C.jsx)(w.a,{type:"password",value:d,onChange:function(e){var t=e.target;return h(t.value)}}),Object(C.jsx)(k.a,{disabled:!x,type:"submit",children:"Login"})," ",Object(C.jsx)(S.b,{to:"register",children:Object(C.jsx)(k.a,{children:"Register"})})]})})})},T=Object(b.c)({name:"diaries",initialState:[{title:"",text:"",priv:!1,user:{username:"",id:""},date:"",id:""}],reducers:{setDiaries:function(e,t){return t.payload},editDiary:function(e,t){for(var r in e)e[r].id==t.payload.id&&(e[r]=t.payload)},createDiary:function(e,t){e.push(t.payload)},deleteDiary:function(e,t){return e.filter((function(e){return e.id!==t.payload}))}}}),E=T.actions,U=E.setDiaries,A=E.editDiary,z=E.createDiary,F=E.deleteDiary,J=T.reducer,L=r(164),R=r(170),I=r(165),W=r(173);function B(e){var t=e.diaryText,r=Object(W.a)(),n=r.isOpen,c=r.onOpen,a=r.onClose;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(L.a,{onClick:c,children:"Read Dream"}),Object(C.jsxs)(R.a,{isOpen:n,onClose:a,children:[Object(C.jsx)(R.f,{}),Object(C.jsxs)(R.d,{children:[Object(C.jsx)(R.c,{}),Object(C.jsxs)(R.b,{children:[Object(C.jsx)("br",{}),Object(C.jsx)(I.a,{children:t})]})]})]})]})}var Y="http://localhost:3001/api/diaries",M=null,N=function(){var e=Object(j.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:M}},e.next=3,d.a.get(Y,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q={createDiary:function(){var e=Object(j.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:M}},e.next=3,d.a.post(Y,t,r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){M="bearer ".concat(e)},getPublicDiaries:N,getUsersDiaries:function(){var e=Object(j.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:M}},e.next=3,d.a.get("".concat(Y,"/currentUserDiaries"),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),changeDiaryPrivacy:function(){var e=Object(j.a)(u.a.mark((function e(t,r){var n,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:M}},c={priv:t},e.next=4,d.a.put("".concat(Y,"/").concat(r),c,n);case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),editDiary:function(){var e=Object(j.a)(u.a.mark((function e(t,r,n){var c,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={headers:{Authorization:M}},a={text:r,priv:n},e.next=4,d.a.put("".concat(Y,"/").concat(t),a,c);case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),deleteDiary:function(){var e=Object(j.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:M}},e.next=3,d.a.delete("".concat(Y,"/").concat(t),r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},G=r(166),H=r(167);function K(){var e=Object(o.b)();Object(n.useEffect)((function(){function t(){return(t=Object(j.a)(u.a.mark((function t(){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.getPublicDiaries();case 2:r=t.sent,e(U(r));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]);var t=Object(o.c)((function(e){return e.diaries})).filter((function(e){return 0==e.priv}));return Object(C.jsxs)("div",{children:[Object(C.jsx)(G.a,{children:"Public Dreams"}),Object(C.jsxs)(H.a,{children:[Object(C.jsx)(H.b,{children:"Public Dream Journal Entries"}),Object(C.jsx)(H.f,{children:Object(C.jsxs)(H.g,{children:[Object(C.jsx)(H.e,{children:"Title"}),Object(C.jsx)(H.e,{children:"Date"}),Object(C.jsx)(H.e,{children:"Dream"}),Object(C.jsx)(H.e,{children:"User"})]})}),Object(C.jsx)(H.c,{children:Object.values(t).map((function(e){return Object(C.jsxs)(H.g,{children:[Object(C.jsx)(H.d,{children:e.title}),Object(C.jsx)(H.d,{children:e.date.substring(0,9)}),Object(C.jsx)(H.d,{color:"blue",children:Object(C.jsx)(B,{diaryText:e.text})}),Object(C.jsx)(H.d,{children:e.user.username})]},e.id)}))})]})]})}var Q=r(14),V=r(174),X=r(168),Z=r(169);function $(e){var t=e.diaryText,r=e.diaryId,c=e.diaryPriv,a=Object(W.a)(),i=a.isOpen,b=a.onOpen,l=a.onClose,d=Object(n.useState)(t),h=Object(s.a)(d,2),O=h[0],x=h[1],p=Object(n.useState)(c.toString()),f=Object(s.a)(p,2),v=f[0],m=f[1],w=Object(o.b)(),S=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),P()){e.next=3;break}return e.abrupt("return");case 3:return n={id:r,text:O,priv:"true"===v},e.prev=4,e.next=7,q.editDiary(n.id,n.text,n.priv);case 7:c=e.sent,w(A(c)),x(""),l(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),alert(e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){return O.length>=10&&O.length<=500},T=P();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(k.a,{onClick:b,children:"Edit Dream"}),Object(C.jsxs)(R.a,{isOpen:i,onClose:l,children:[Object(C.jsx)(R.f,{}),Object(C.jsxs)(R.d,{children:[Object(C.jsx)(R.e,{children:"Edit Dream"}),Object(C.jsx)(R.c,{}),Object(C.jsx)(R.b,{children:Object(C.jsx)("form",{onSubmit:S,children:Object(C.jsxs)(y.a,{children:[Object(C.jsx)(D.a,{children:"Edit Dream"}),Object(C.jsx)(X.a,{value:O,onChange:function(e){var t=e.target;return x(t.value)},children:O}),Object(C.jsx)(D.a,{children:"Change Privacy Setting"}),Object(C.jsxs)(Z.a,{placeholder:"Select One",onChange:function(e){var t=e.target;return m(t.value)},children:[Object(C.jsx)("option",{value:"true",children:"Private"}),Object(C.jsx)("option",{value:"false",children:"Public"})]}),Object(C.jsx)("br",{}),Object(C.jsx)(g.a,{children:Object(C.jsx)(k.a,{disabled:!T,colorScheme:"blue",mr:3,type:"submit",children:"Edit Dream"})})]})})})]})]})]})}function _(){var e=Object(o.b)();Object(n.useEffect)((function(){function t(){return(t=Object(j.a)(u.a.mark((function t(){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q.getUsersDiaries();case 3:r=t.sent,e(U(r)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]);Object(o.c)((function(e){return e.user}));var t=Object(o.c)((function(e){return e.diaries})),r=function(){var t=Object(j.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e(F(r))}catch(n){alert(n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(C.jsxs)("div",{children:[Object(C.jsx)(G.a,{children:"Your Dreams"}),Object(C.jsxs)(H.a,{children:[Object(C.jsx)(H.b,{children:"Your Dream Journal"}),Object(C.jsx)(H.f,{children:Object(C.jsxs)(H.g,{children:[Object(C.jsx)(H.e,{children:"Diary Title"}),Object(C.jsx)(H.e,{children:"Date"}),Object(C.jsx)(H.e,{children:"Diary"}),Object(C.jsx)(H.e,{children:"Private"}),Object(C.jsx)(H.e,{children:"Delete"}),Object(C.jsx)(H.e,{children:"Edit Entry"})]})}),Object(C.jsx)(H.c,{children:Object.values(t).map((function(e){return Object(C.jsxs)(H.g,{children:[Object(C.jsx)(H.d,{children:e.title}),Object(C.jsx)(H.d,{children:e.date.substring(0,10)}),Object(C.jsx)(H.d,{color:"blue",children:Object(C.jsx)(B,{diaryText:e.text})}),Object(C.jsx)(H.d,{children:e.priv.toString()}),Object(C.jsx)(H.d,{children:Object(C.jsx)(k.a,{onClick:function(){return r(e.id)},children:"Delete Diary"})}),Object(C.jsx)(H.d,{children:Object(C.jsx)($,{diaryText:e.text,diaryId:e.id,diaryPriv:e.priv})})]},e.id)}))})]})]})}function ee(){var e=Object(o.b)(),t=Object(n.useState)(""),r=Object(s.a)(t,2),c=r[0],a=r[1],i=Object(n.useState)(""),b=Object(s.a)(i,2),l=b[0],d=b[1],h=Object(n.useState)(""),O=Object(s.a)(h,2),x=O[0],p=O[1],f=Object(W.a)(),v=f.isOpen,m=f.onOpen,S=f.onClose,P=function(){var t=Object(j.a)(u.a.mark((function t(r){var n,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),T()){t.next=3;break}return t.abrupt("return");case 3:return n={text:l,title:c,priv:"true"===x},t.prev=4,t.next=7,q.createDiary(n);case 7:s=t.sent,e(z(s)),d(""),a(""),S(),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),alert(t.t0);case 17:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e){return t.apply(this,arguments)}}(),T=function(){return 5<=c.length&&30>=c.length&&l.length>=10&&l.length<=500},E=T();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(L.a,{onClick:m,children:"Write About A Dream"}),Object(C.jsxs)(R.a,{isOpen:v,onClose:S,children:[Object(C.jsx)(R.f,{}),Object(C.jsxs)(R.d,{children:[Object(C.jsx)(R.e,{children:"Write about your dream"}),Object(C.jsx)(R.c,{}),Object(C.jsx)(R.b,{children:Object(C.jsx)("form",{onSubmit:P,children:Object(C.jsxs)(y.a,{children:[Object(C.jsx)(D.a,{children:"Title (5 to 30 chars)"}),Object(C.jsx)(w.a,{type:"text",onChange:function(e){var t=e.target;return a(t.value)}}),Object(C.jsx)(D.a,{children:"Dream Description (10 to 500 chars)"}),Object(C.jsx)(X.a,{onChange:function(e){var t=e.target;return d(t.value)}}),Object(C.jsx)(D.a,{children:"Privacy Setting"}),Object(C.jsxs)(Z.a,{placeholder:"Select option",onChange:function(e){var t=e.target;return p(t.value)},children:[Object(C.jsx)("option",{value:"true",children:"Private"}),Object(C.jsx)("option",{value:"false",children:"Public"})]}),Object(C.jsx)("br",{}),Object(C.jsx)(g.a,{children:Object(C.jsx)(k.a,{disabled:!E,colorScheme:"blue",mr:3,type:"submit",children:"Create Dream Journal Entry"})})]})})})]})]})]})}function te(){var e=Object(o.b)(),t=function(){var t=Object(j.a)(u.a.mark((function t(r){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),P()){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,h.createUser({username:a,password:d});case 6:n=t.sent,e(p(n)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),alert(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),r=Object(n.useState)(""),c=Object(s.a)(r,2),a=c[0],i=c[1],b=Object(n.useState)(""),l=Object(s.a)(b,2),d=l[0],O=l[1],x=Object(n.useState)(""),f=Object(s.a)(x,2),v=f[0],m=f[1],P=function(){return d===v&&d.length>=5&&a.length>=3},T=P();return Object(C.jsx)(g.a,{children:Object(C.jsxs)("form",{onSubmit:t,children:[Object(C.jsxs)(y.a,{paddingTop:"10",children:[Object(C.jsx)(D.a,{children:"Username (minimum 3 characters)"}),Object(C.jsx)(w.a,{type:"text",value:a,onChange:function(e){var t=e.target;return i(t.value)}}),Object(C.jsx)(D.a,{paddingTop:"5",children:"Password (minimum 5 characters)"}),Object(C.jsx)(w.a,{type:"password",value:d,onChange:function(e){var t=e.target;return O(t.value)}}),Object(C.jsx)(D.a,{paddingTop:"5",children:"Confirm Password (must be the same as password)"}),Object(C.jsx)(w.a,{type:"password",value:v,onChange:function(e){var t=e.target;return m(t.value)}}),Object(C.jsx)(k.a,{disabled:!T,type:"submit",children:"Register"})," ",Object(C.jsx)(S.b,{to:"/login",children:Object(C.jsx)(k.a,{children:"Back to Login"})})]}),!1]})})}function re(){var e=Object(o.b)();return Object(C.jsxs)(V.a,{spacing:"8px",children:[Object(C.jsx)(V.b,{children:Object(C.jsx)(V.c,{as:S.b,to:"/publicdiaries",children:"Public Dreams"})}),Object(C.jsx)(V.b,{children:Object(C.jsx)(V.c,{as:S.b,to:"/mydiaries",children:"My Dreams"})}),Object(C.jsx)(V.b,{children:Object(C.jsx)(ee,{})}),Object(C.jsx)(V.b,{children:Object(C.jsx)(L.a,{onClick:function(){e(f())},children:"Logout"})})]})}var ne=function(){var e=Object(o.c)((function(e){return e.user}));return""!==e.token&&q.setToken(e.token),Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S.a,{children:Object(C.jsxs)("div",{className:"App",children:[""!=e.username&&Object(C.jsx)(re,{}),Object(C.jsxs)(Q.d,{children:[Object(C.jsxs)(Q.b,{path:"/publicdiaries",children:[""==e.username&&Object(C.jsx)(Q.a,{to:"/login"}),Object(C.jsx)(K,{})]}),Object(C.jsxs)(Q.b,{path:"/mydiaries",children:[""==e.username&&Object(C.jsx)(Q.a,{to:"/login"}),Object(C.jsx)(_,{})]}),Object(C.jsxs)(Q.b,{path:"/register",children:[Object(C.jsx)(g.a,{children:Object(C.jsx)(G.a,{children:"Register"})}),""!=e.username&&Object(C.jsx)(Q.a,{to:"/"}),Object(C.jsx)(te,{})]}),Object(C.jsxs)(Q.b,{path:"/login",children:[Object(C.jsx)(g.a,{children:Object(C.jsx)(G.a,{children:"Login Page"})}),Object(C.jsx)(P,{}),""!=e.username&&Object(C.jsx)(Q.a,{to:"/"})]}),Object(C.jsxs)(Q.b,{path:"/",children:[""==e.username&&Object(C.jsx)(Q.a,{to:"/login"}),""!=e.username&&Object(C.jsx)(Q.a,{to:"/publicdiaries"})]})]})]})})})},ce=Object(b.a)({reducer:{diaries:J,user:v}}),ae=r(172);a.a.render(Object(C.jsx)(o.a,{store:ce,children:Object(C.jsx)(ae.a,{children:Object(C.jsx)(ne,{})})}),document.getElementById("root"))}},[[151,1,2]]]);
//# sourceMappingURL=main.75a21dbf.chunk.js.map